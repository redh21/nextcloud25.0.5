{"version":3,"file":"photos-src_mixins_AbortControllerMixin_js-src_components_HeaderNavigation_vue.js?v=bcc16e6e6df4dd338a9e","mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAkBA;AACA;;;;;;;;;;;;;;;ACxCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AIAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///photos/src/components/HeaderNavigation.vue?vue&type=script&lang=js&","webpack:///photos/src/mixins/AbortControllerMixin.js","webpack:///photos/src/components/HeaderNavigation.vue?vue&type=style&index=0&lang=scss&","webpack:///photos/src/components/HeaderNavigation.vue?vue&type=style&index=1&id=21ecc79e&lang=scss&scoped=true&","webpack://photos/./src/components/HeaderNavigation.vue?29e2","webpack://photos/./src/components/HeaderNavigation.vue?3f47","webpack:///photos/src/components/HeaderNavigation.vue","webpack://photos/./src/components/HeaderNavigation.vue?3b25","webpack://photos/./src/components/HeaderNavigation.vue?64eb","webpack://photos/./src/components/HeaderNavigation.vue?70fb","webpack:///photos/src/components/HeaderNavigation.vue?vue&type=template&id=21ecc79e&scoped=true&","webpack://photos/./src/components/HeaderNavigation.vue?ea63"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ArrowLeft from 'vue-material-design-icons/ArrowLeft.vue';\nimport { NcButton, NcLoadingIcon } from '@nextcloud/vue';\nexport default {\n  name: 'HeaderNavigation',\n  components: {\n    ArrowLeft,\n    NcButton,\n    NcLoadingIcon\n  },\n  inheritAttrs: false,\n  props: {\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    path: {\n      type: String,\n      default: '/'\n    },\n    title: {\n      type: String,\n      required: true\n    },\n    rootTitle: {\n      type: String,\n      default: t('photos', 'Photos')\n    },\n    // The route params\n    params: {\n      type: Object,\n      default: null\n    }\n  },\n  computed: {\n    isRoot() {\n      const isRoot = this.path === '/';\n      this.toggleNavigationButton(!isRoot);\n      return isRoot;\n    },\n\n    name() {\n      if (this.isRoot) {\n        return this.rootTitle;\n      }\n\n      return this.title;\n    },\n\n    parentPath() {\n      const path = this.path.split('/');\n      path.pop();\n      const parent = path.join('/');\n      return this.isRoot || parent.trim() === '' ? '/' : path.join('/');\n    },\n\n    parentName() {\n      return this.parentPath && this.parentPath.split('/').pop();\n    },\n\n    backToText() {\n      if (this.parentPath === '/') {\n        return t('photos', 'Back to {folder}', {\n          folder: this.rootTitle\n        });\n      }\n\n      return t('photos', 'Back to {folder}', {\n        folder: this.parentName\n      });\n    },\n\n    /**\n     * We do not want encoded slashes when browsing by folder\n     * so we generate a new valid route object, get the final url back\n     * decode it and use it as a direct string, which vue-router\n     * does not encode afterwards\n     *\n     * @return {string|object}\n     */\n    to() {\n      // always remove first slash, the router\n      // manage it automatically\n      const regex = /^\\/?(.*)/i;\n      const path = regex.exec(this.parentPath)[1]; // apply to current route\n\n      const {\n        name,\n        params\n      } = Object.assign({}, this.$route, {\n        params: this.params || {\n          path\n        }\n      }); // return the full object as we don't care about\n      // an empty path if this is route\n\n      if (path === '') {\n        return {\n          name\n        };\n      } // returning a string prevent vue-router to encode it again\n\n\n      return decodeURIComponent(this.$router.resolve({\n        name,\n        params\n      }).resolved.path);\n    }\n\n  },\n  methods: {\n    folderUp() {\n      this.$router.push(this.to);\n    },\n\n    refresh() {\n      this.$emit('refresh');\n    },\n\n    toggleNavigationButton(hide) {\n      // Hide the navigation toggle if the back button is shown\n      const navigationToggle = document.querySelector('button.app-navigation-toggle');\n\n      if (navigationToggle !== null) {\n        navigationToggle.style.display = hide ? 'none' : null;\n      }\n    }\n\n  }\n};","/**\n * @copyright Copyright (c) 2022 Louis Chemineau <louis@chmn.me>\n *\n * @author Louis Chemineau <louis@chmn.me>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\nexport default {\n  name: 'AbortControllerMixin',\n\n  data() {\n    return {\n      abortController: new AbortController()\n    };\n  },\n\n  beforeDestroy() {\n    this.abortController.abort();\n  },\n\n  beforeRouteLeave(from, to, next) {\n    this.abortController.abort();\n    this.abortController = new AbortController();\n    next();\n  }\n\n};","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root {\\n  --photos-navigation-height: 64px;\\n  --photos-navigation-spacing: calc((var(--photos-navigation-height) - 44px) / 2);\\n}\\nbutton.app-navigation-toggle {\\n  top: 0 !important;\\n  right: calc(var(--photos-navigation-height) * -1) !important;\\n  margin: var(--photos-navigation-spacing) !important;\\n}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".photos-navigation[data-v-21ecc79e] {\\n  position: sticky;\\n  z-index: 20;\\n  top: 0;\\n  display: flex;\\n  align-items: center;\\n  width: 100%;\\n  min-height: var(--photos-navigation-height);\\n  padding: 0 var(--photos-navigation-height);\\n  background: var(--color-main-background);\\n}\\n.photos-navigation__back[data-v-21ecc79e] {\\n  position: absolute !important;\\n  left: 0;\\n  margin: var(--photos-navigation-spacing) !important;\\n}\\n.photos-navigation__title[data-v-21ecc79e] {\\n  max-width: 50%;\\n  margin-right: calc(2 * var(--photos-navigation-spacing));\\n  display: flex;\\n  flex-direction: column;\\n}\\n.photos-navigation__title__main[data-v-21ecc79e] {\\n  margin: 0;\\n  cursor: pointer;\\n}\\n.photos-navigation__title__main[data-v-21ecc79e], .photos-navigation__title__sub[data-v-21ecc79e] {\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n.photos-navigation__loader[data-v-21ecc79e] {\\n  margin-left: 32px;\\n}\\n.photos-navigation__content-right[data-v-21ecc79e] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  margin-left: auto;\\n}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=0&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=0&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=1&id=21ecc79e&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=1&id=21ecc79e&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./HeaderNavigation.vue?vue&type=template&id=21ecc79e&scoped=true&\"\nimport script from \"./HeaderNavigation.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderNavigation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderNavigation.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./HeaderNavigation.vue?vue&type=style&index=1&id=21ecc79e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21ecc79e\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/louis/workspace/nextcloud/apps/photos/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('21ecc79e')) {\n      api.createRecord('21ecc79e', component.options)\n    } else {\n      api.reload('21ecc79e', component.options)\n    }\n    module.hot.accept(\"./HeaderNavigation.vue?vue&type=template&id=21ecc79e&scoped=true&\", function () {\n      api.rerender('21ecc79e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/HeaderNavigation.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=script&lang=js&\"","export * from \"-!../../node_modules/style-loader/dist/cjs.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/style-loader/dist/cjs.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2[0].rules[0].use[3]!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=style&index=1&id=21ecc79e&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderNavigation.vue?vue&type=template&id=21ecc79e&scoped=true&\"","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"photos-navigation\",\n      class: { \"photos-navigation--root\": _vm.isRoot },\n      attrs: { role: \"toolbar\" },\n    },\n    [\n      !_vm.isRoot\n        ? _c(\"NcButton\", {\n            staticClass: \"photos-navigation__back\",\n            attrs: { type: \"tertiary\" },\n            on: { click: _vm.folderUp },\n            scopedSlots: _vm._u(\n              [\n                {\n                  key: \"icon\",\n                  fn: function () {\n                    return [_c(\"ArrowLeft\", { attrs: { size: 20 } })]\n                  },\n                  proxy: true,\n                },\n              ],\n              null,\n              false,\n              1821202730\n            ),\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"photos-navigation__title\" },\n        [\n          _c(\n            \"h2\",\n            {\n              staticClass: \"photos-navigation__title__main\",\n              on: { click: _vm.refresh },\n            },\n            [_vm._v(\"\\n\\t\\t\\t\" + _vm._s(_vm.name) + \"\\n\\t\\t\")]\n          ),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"photos-navigation__title__sub\" }),\n          _vm._v(\" \"),\n          _vm._t(\"subtitle\"),\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _vm.$slots.default\n        ? _c(\n            \"div\",\n            { staticClass: \"photos-navigation__content\" },\n            [_vm._t(\"default\")],\n            2\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"NcLoadingIcon\", {\n        directives: [\n          {\n            name: \"show\",\n            rawName: \"v-show\",\n            value: _vm.loading,\n            expression: \"loading\",\n          },\n        ],\n        staticClass: \"photos-navigation__loader\",\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"photos-navigation__content-right\" },\n        [_vm._t(\"right\")],\n        2\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"names":[],"sourceRoot":""}